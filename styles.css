/* ===== Base ===== */
:root{
  --bg: #0b1020;
  --bg-soft:#0f1529;
  --text:#eaf1ff;
  --muted:#aab5cf;

  --brand-grad: linear-gradient(90deg,#6a4df6 0%, #0077ff 100%);

  /* Pasteles por área */
  --A:#e6f1ff;   --A-b:#7db1ff;
  --C:#f7ecff;   --C-b:#c59dff;
  --MC:#e8fff7;  --MC-b:#6bd9b6;
  --E:#fff4e6;   --E-b:#ffb56a;
  --I:#eaf7ff;   --I-b:#61c3ff;
  --S:#fff0f2;   --S-b:#ff8fa3;
  --J:#f2fff0;   --J-b:#9ed97d;

  --ok:#2bd87f;
  --cur:#1da1f2;
  --free:#35e0b6;
  --lock:#b3bcd3;

  --card:#0f1529;
  --card-b:#1d2542;
  --ring: rgba(255,255,255,.25);
}

[data-theme="light"]{
  --bg:#f6f8ff; --bg-soft:#eef3ff;
  --text:#0f172a; --muted:#51607a;
  --card:#ffffff; --card-b:#e6eaf6;

  /* Pasteles se mantienen */
}

/* Reset / basics */
*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{
  background: var(--bg);
  color: var(--text);
  font: 16px/1.45 system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
}
a{color:inherit;text-decoration:none}
.container{width:min(1180px, 92vw); margin: 0 auto}

/* ===== Topbar ===== */
.ng-topbar{
  background: var(--brand-grad);
  padding: 10px 0 18px;
  position: sticky; top:0; z-index: 20;
  color:#fff;
}
.ng-topbar__inner{
  display:flex; align-items:center; justify-content:space-between;
}
.brand-link{
  font-weight:800; letter-spacing:.2px;
  padding:.5rem .8rem; border-radius:14px;
  background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.2);
  box-shadow:0 6px 14px rgba(0,0,0,.15);
}
.top-actions{display:flex; gap:.5rem}
.btn-ghost{
  background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.2);
  color:#fff; padding:.5rem .7rem; border-radius:12px; font-weight:700;
}
.btn-ghost.exit{padding:.5rem .75rem}

.ng-metrics{
  margin-top: 12px;
}
.legend{display:flex; gap:16px; align-items:center; flex-wrap:wrap; opacity:.92}
.legend .dot{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:6px}
.legend .ok{background:var(--ok)}
.legend .cur{background:var(--cur)}
.legend .free{background:var(--free)}
.legend .lock{background:var(--lock)}
.legend .pill{margin-left:4px}

.counters{margin-top:10px; opacity:.95}
.counters .sep{display:inline-block; width:14px}

.progress{height:10px;background:rgba(255,255,255,.22);border-radius:999px;margin-top:8px;position:relative}
.progress__fill{height:100%;background:#fff;border-radius:999px;width:0%}
.progress__label{margin-top:6px;font-weight:800}

/* ===== Pills ===== */
.pill{
  display:inline-flex; align-items:center; justify-content:center;
  font-weight:800; font-size:.72rem; padding:.15rem .35rem; border-radius:8px;
  background: rgba(255,255,255,.14); border:1px solid rgba(255,255,255,.25);
}
.pill--ob{background:#0b1327;color:#fff;border-color:#33416a}
.pill--op{background:#0aa4ff22;color:#fff;border-color:#59c1ff}

/* ===== Toolbar (filtros + acciones) ===== */
.toolbar{
  padding: 18px 0 8px;
  display:grid; grid-template-columns: 1fr 1fr; gap: 12px 18px;
}
.toolbar__left, .toolbar__right{
  display:grid; gap:10px;
  /* 3 columnas por fila, dos filas => mismo ancho/justificado */
  grid-template-columns: repeat(3, 1fr);
}
.field{
  width:100%; background: var(--card); color:var(--text);
  border:1px solid var(--card-b); border-radius:12px;
  padding:.65rem .75rem; font-weight:600;
}
.btn{background:#0b1327;color:#fff;border:1px solid #33416a;border-radius:12px;padding:.65rem .9rem;font-weight:800}
.btn.soft{background:#0aa4ff22;border-color:#59c1ff}
.btn.ghost{background:transparent;border-color:#7785ac;color:var(--text)}
.btn.danger{background:#e11d48;border-color:#f87171}

/* ===== Estructura Año → Semestres ===== */
.year-card{
  background: var(--bg-soft);
  border:1px solid var(--card-b); border-radius:18px;
  padding:18px; margin:18px 0 26px;
}
.year-card__title{margin:6px 0 14px;font-size:1.45rem}
.sem-list{display:grid; gap:16px; grid-template-columns:1fr 1fr}
.sem{background: var(--card); border:1px solid var(--card-b); border-radius:16px; padding:14px}
.sem__title{margin:2px 0 12px; font-size:1.05rem; opacity:.9}
.m-grid{display:grid; gap:10px}

/* ===== Materia card ===== */
.materia{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  background: var(--card); border:1px solid var(--card-b); border-radius:14px;
  padding:12px 12px 12px 10px; position:relative;
}
.materia::before{
  content:""; position:absolute; left:6px; top:8px; bottom:8px; width:6px; border-radius:8px;
  background: var(--card-b);
}
.m-left{padding-left:14px}
.m-name{font-weight:800}
.m-meta{color:var(--muted); font-size:.85rem}

/* estados (bordes/halo) */
.materia.aprobada{box-shadow:0 0 0 2px rgba(43,216,127,.35) inset}
.materia.cursando{box-shadow:0 0 0 2px rgba(29,161,242,.35) inset}
.materia.disponible{box-shadow:0 0 0 2px rgba(53,224,182,.28) inset}
.materia.bloqueada{opacity:.9}

/* tag tipo */
.m-right{display:flex; align-items:center; gap:10px}
.badge--state{font-weight:800; font-size:.8rem; opacity:.95}
.t-pill{display:inline-flex; align-items:center; justify-content:center; font-weight:900; font-size:.7rem;
  border-radius:8px; padding:.18rem .38rem; border:1px solid var(--card-b)}
.tp-ob{background:#0b1327;color:#fff}
.tp-op{background:#0aa4ff22;color:#9ad8ff}

/* Paleta pastel por área (borde lateral) */
.materia.A::before{background:var(--A-b)}
.materia.C::before{background:var(--C-b)}
.materia.MC::before{background:var(--MC-b)}
.materia.E::before{background:var(--E-b)}
.materia.I::before{background:var(--I-b)}
.materia.S::before{background:var(--S-b)}
.materia.J::before{background:var(--J-b)}

/* ===== Tooltip rico para previas ===== */
.rich-tip{
  position: fixed; z-index: 50;
  background: var(--card); color:var(--text);
  border:1px solid var(--card-b); border-radius:12px;
  padding:.6rem .7rem; box-shadow:0 14px 30px rgba(0,0,0,.25);
  min-width: 240px; font-weight:600;
}
.rich-tip .rt-title{font-weight:900;margin-bottom:.35rem}
.rich-tip ul{margin:.2rem 0 0 1.1rem; padding:0}
.rich-tip li{margin:.18rem 0}

/* ===== Util ===== */
.muted{color:var(--muted)}
