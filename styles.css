/* ===== Reset & variables ===== */
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%}
:root{
  --bg:#f6f7fb;
  --text:#0f172a;
  --muted:#64748b;
  --line:#e5e7eb;
  --card:#ffffff;

  --g1:#8b5cf6; --g2:#06b6d4;

  --shadow-lg:0 22px 60px rgba(16,24,40,.18);
  --shadow-md:0 14px 36px rgba(16,24,40,.12);
  --shadow-sm:0 8px 22px rgba(16,24,40,.10);
}
html[data-theme="dark"]{
  --bg:#0b1220; --text:#e5e7eb; --muted:#a1a1aa; --line:#1f2937; --card:#0f172a;
  --g1:#6d28d9; --g2:#0ea5e9;
  --shadow-lg:0 28px 70px rgba(0,0,0,.55);
  --shadow-md:0 18px 44px rgba(0,0,0,.45);
  --shadow-sm:0 10px 26px rgba(0,0,0,.35);
}
body{font-family:ui-sans-serif,system-ui,"Segoe UI",Roboto,Ubuntu,Arial;background:var(--bg);color:var(--text);line-height:1.55}
a{color:inherit;text-decoration:none}
a.link{color:#0ea5e9}
a.link:focus-visible{outline:3px solid #0ea5e9;outline-offset:3px}
.container{max-width:1100px;margin:0 auto;padding:0 16px}
.section{padding:12px 0}

/* ===== Topbar ===== */
.topbar{position:relative;z-index:5;background:transparent;padding:10px 0}
.topbar-inner{display:flex;justify-content:space-between;align-items:center}
.brand-mini{font-weight:800;opacity:.95}
.btn-link{font-weight:800;opacity:.95;border:1px solid var(--line);border-radius:10px;padding:.4rem .6rem;background:var(--card)}
.btn-link:hover{filter:brightness(1.03)}
.theme-toggle{font-size:1.05rem;line-height:1;cursor:pointer;border:none;border-radius:10px;padding:.5rem .6rem;background:var(--card);color:var(--text);box-shadow:var(--shadow-sm)}
.theme-toggle:hover{filter:brightness(1.05)}
.theme-toggle:focus-visible{outline:3px solid #0ea5e9;outline-offset:3px}

/* ===== Landing hero (sigue funcionando tu index) ===== */
.ng-hero{background:linear-gradient(135deg,var(--g1) 0%, var(--g2) 100%);color:#fff;position:relative;overflow:hidden;padding:34px 0 46px}
.hero-only{display:flex;flex-direction:column;align-items:center;text-align:center}
.hero-title{font-size:clamp(2.2rem,5vw,3.2rem);font-weight:900;letter-spacing:.2px;margin:8px 0 8px}
.brand-accent{background:rgba(255,255,255,.18);padding:0 .42rem;border-radius:.55rem}
.hero-sub{opacity:.98;max-width:780px;margin:0 0 16px 0}
.hero-cta.center{display:flex;justify-content:center}
.btn-cta{display:inline-block;background:linear-gradient(135deg,#0b1220 0%, #111827 100%);color:#fff;border:0;border-radius:14px;padding:1rem 1.6rem;font-weight:900;font-size:1.08rem;box-shadow:var(--shadow-lg);transition:transform .08s ease, box-shadow .14s ease, filter .14s ease, background .18s ease}
.btn-cta:hover{transform:translateY(-2px);background:linear-gradient(135deg,#1f2937 0%, #0b1220 100%);box-shadow:0 30px 72px rgba(0,0,0,.35);filter:brightness(1.06)}
.btn-cta:active{transform:translateY(0); filter:brightness(.98)}
.btn-cta:focus-visible{outline:3px solid #fff; outline-offset:3px}
.hero-shadow{position:absolute;left:0;right:0;bottom:-20px;height:40px;background:radial-gradient(120% 60px at 50% 0, rgba(0,0,0,.18), transparent 70%);filter:blur(10px); pointer-events:none}

/* ===== Landing beneficios ===== */
.benefits-wrap{margin-top:22px;margin-bottom:18px}
.benefits-grid{display:grid;gap:16px;grid-template-columns:repeat(3,minmax(0,1fr))}
@media (max-width:980px){.benefits-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
@media (max-width:640px){.benefits-grid{grid-template-columns:1fr}}
.card{background:var(--card);border:1px solid var(--line);border-radius:18px;padding:16px 18px;box-shadow:var(--shadow-md);transition:transform .14s ease, box-shadow .14s ease, filter .2s ease}
.card:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}
.card.benefit{display:flex;flex-direction:column;gap:10px;min-height:120px}
.card.primary{box-shadow:var(--shadow-lg)} .card.secondary{box-shadow:var(--shadow-sm)}
.benefit-header{display:flex;align-items:center;gap:10px}
.card h3{font-size:1.08rem;font-weight:900;margin:0}
.card p{color:var(--muted);margin-top:2px}
.badge-icon{width:40px;height:40px;border-radius:12px;display:grid;place-items:center;color:#111827;background:#fff;box-shadow:0 6px 16px rgba(0,0,0,.06);border:3px solid color-mix(in oklab, #8b5cf6, transparent 60%)}
html[data-theme="dark"] .badge-icon{color:#e5e7eb;background:#0b1220}

/* CTA sticky mobile */
.cta-sticky{position:fixed;left:50%;transform:translateX(-50%);bottom:14px;z-index:50;display:none;background:linear-gradient(135deg,#0b1220 0%, #111827 100%);color:#fff;border-radius:999px;padding:.9rem 1.1rem;font-weight:900;box-shadow:var(--shadow-lg)}
.cta-sticky:focus-visible{outline:3px solid #fff; outline-offset:3px}
@media (max-width:720px){.cta-sticky{display:inline-block}}

/* ===== Footer ===== */
.ng-footer{padding:24px 16px 44px;text-align:center}
.ng-footer .footer-inner{max-width:none;width:100%;margin:0 auto;text-align:center;display:flex;flex-direction:column;align-items:center;gap:6px}
.ng-footer p{color:var(--muted)}
.ng-footer .footer-links{font-size:.92rem;opacity:.95}

/* ===== Botones / utilidades ===== */
.btn{ height:40px; padding:0 .9rem; border-radius:10px; border:1px solid transparent; font-weight:800; background:var(--text); color:#fff; }
.btn:hover{ filter:brightness(1.03); }
.btn.ghost{ background:var(--card); color:var(--text); border-color:var(--line); }
.btn.danger{ background:#ef4444; color:#fff; }
.btn.small{ height:32px; padding:0 .6rem; font-size:.9rem; }
.muted{color:var(--muted)}

/* =========================================================
   MALLA – grid, tarjetas, filtros, leyenda, progreso
   ========================================================= */

/* Header centrado + progreso */
.malla-hero { display:grid; place-items:center; text-align:center; padding:12px 0 6px; }
.malla-hero-inner { max-width:900px; }
.malla-hero h1 { font-size:clamp(1.8rem,4vw,2.2rem); font-weight:900; margin-bottom:4px; }

/* Leyenda */
.legend { display:flex; flex-wrap:wrap; gap:.75rem; margin:.5rem 0 1rem 0; justify-content:center; }
.legend-item { font-size:.95rem; color:var(--muted); display:flex; align-items:center; gap:.35rem; }
.legend-dot { width:1.2rem; display:inline-flex; align-items:center; justify-content:center; }

/* KPIs y progreso */
.cards-row.stat-row{display:flex; gap:.6rem; flex-wrap:wrap; justify-content:center; margin:.4rem 0 .6rem}
.stat-pill{background:var(--card);border:1px solid var(--line);border-radius:999px;padding:.4rem .8rem;box-shadow:var(--shadow-sm)}
.progress-wrap { margin-top:10px; }
.progress-head { display:flex; align-items:center; justify-content:space-between; margin-bottom:6px; }
.bar{height:12px;border-radius:999px;background:#e5e7eb;overflow:hidden}
html[data-theme="dark"] .bar{background:#111827}
.bar>span{display:block;height:100%;background:linear-gradient(90deg,#22c55e,#16a34a);border-radius:999px;transition:width .25s ease}

/* Filtros / toolbar */
.toolbar {
  display:grid;
  grid-template-columns: 1.2fr repeat(5, .9fr) auto;
  gap:.75rem; align-items:end;
}
.control label { display:block; font-size:.78rem; color:var(--muted); margin-bottom:.2rem; }
.control input, .control select {
  width:100%; height:40px; border:1px solid var(--line); background:var(--card);
  color:var(--text); border-radius:10px; padding:0 .6rem; outline:none;
}
.control-actions { display:flex; gap:.5rem; align-items:center; justify-content:flex-end; }
@media (max-width: 980px){ .toolbar{ grid-template-columns:1fr 1fr 1fr; } }
@media (max-width: 640px){ .toolbar{ grid-template-columns:1fr 1fr; } }

/* Grid de materias */
#malla-container{margin:10px 0 30px}
.malla{
  display:grid;
  grid-template-columns: repeat(3, minmax(260px, 1fr));
  gap: .75rem;
}
@media (max-width: 980px){ .malla{ grid-template-columns:repeat(2,minmax(240px,1fr)); } }
@media (max-width: 640px){ .malla{ grid-template-columns:1fr; } }

/* Tarjeta de materia */
.materia{
  position:relative;
  border-radius:14px;
  padding:12px;
  color:#fff;
  box-shadow:0 8px 22px rgba(0,0,0,.16);
  transition:transform .15s ease, box-shadow .15s ease, opacity .15s ease, filter .15s ease;
  cursor:pointer; user-select:none; min-height:110px; outline:none;
}
.materia:hover{transform:translateY(-2px);box-shadow:0 14px 28px rgba(0,0,0,.20)}
.materia:focus-visible{outline:3px solid #fff; outline-offset:2px}

/* Texto dentro de la tarjeta */
.m-row{ display:flex; align-items:center; justify-content:space-between; gap:.5rem; }
.m-title { display:flex; align-items:center; gap:.5rem; font-weight:800; line-height:1.2; }
.status-emoji { margin-right:.2rem; }
.m-nombre{font-weight:800;line-height:1.2}
.m-meta{font-size:.84rem;opacity:.92;margin-top:4px}
.m-previas{font-size:.78rem;opacity:.9;margin-top:6px}
.m-estado{font-size:.8rem;margin-top:6px;opacity:.95}

/* Estados visuales */
.materia.aprobada{outline:2px solid rgba(16,185,129,.4)}
.materia.cursando{outline:2px dashed rgba(255, 193, 7, .45)}
.materia.bloqueada{filter:grayscale(.08) contrast(.95);opacity:.92}

/* Chips OB/OP */
.chip { display:inline-flex; align-items:center; justify-content:center; height:20px; padding:0 .4rem;
  font-size:.75rem; border-radius:6px; background:rgba(0,0,0,.08); border:1px solid var(--line); }
[data-theme="dark"] .chip { background:rgba(255,255,255,.06); }
.chip.alt { background:#0ea5e9; color:#fff; border-color:#0ea5e9; }

/* Colores por área */
.A  { background:#7c3aed; }   /* Administración */
.C  { background:#0ea5e9; }   /* Contabilidad */
.MC { background:#16a34a; }   /* Métodos Cuantitativos */
.E  { background:#f97316; }   /* Economía */
.I  { background:#14b8a6; }   /* Integradoras */
.S  { background:#db2777; }   /* Sociales */
.J  { background:#f59e0b; }   /* Jurídica */

/* ===== Modal de opcionales ===== */
.op-modal { position:fixed; inset:0; display:grid; place-items:center; z-index:60; }
.op-modal[hidden]{ display:none; }
.op-backdrop { position:fixed; inset:0; background:rgba(0,0,0,.35); backdrop-filter:blur(2px); }
.op-dialog { position:relative; z-index:1; width:min(820px, 92vw); max-height:80vh; overflow:hidden; }
.op-head { display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:1px solid var(--line); }
.op-body { padding:10px 12px; overflow:auto; max-height:60vh; background:var(--bg); }
.op-foot { display:flex; justify-content:flex-end; gap:8px; padding:10px 12px; border-top:1px solid var(--line); background:var(--card); }
.op-list { display:grid; gap:8px; }
.op-row { display:grid; grid-template-columns:auto 1fr auto; gap:10px; align-items:center; padding:8px 10px; border:1px solid var(--line); border-radius:10px; background:var(--card); }
.op-name { font-weight:700; }
.op-meta { color:var(--muted); font-size:.9rem; }
