<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Malla Interactiva â€” AdministraciÃ³n</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- Topbar simple -->
  <div class="topbar">
    <div class="container topbar-inner">
      <span class="brand-mini">Notegood.uy âœ¨</span>
      <button id="themeToggle" class="theme-toggle" aria-label="Cambiar tema">ğŸŒ™</button>
    </div>
  </div>

  <main class="container" style="padding-top:12px">
    <header style="margin-bottom:12px">
      <h1 class="page-title">ğŸ“Œ Malla Interactiva â€” AdministraciÃ³n</h1>
      <p class="page-sub">Haz clic en las materias que ya aprobaste (clic derecho: marcar â€œcursandoâ€).</p>
    </header>

    <!-- KPIs + barra de progreso (IDs que tu app.js espera) -->
    <section class="card" style="margin-bottom:12px; padding:14px">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap">
        <div id="progress-label" class="muted">Progreso</div>
        <div class="kpis" style="display:flex;gap:14px">
          <div class="kpi"><small>Materias aprobadas</small><b id="kpi-aprobadas">0</b></div>
          <div class="kpi"><small>Materias totales</small><b id="kpi-totales">0</b></div>
          <div class="kpi"><small>CrÃ©ditos aprobados</small><b id="kpi-creditos">0</b></div>
        </div>
      </div>
      <div class="bar" style="margin-top:8px"><span id="bar" style="width:0%"></span></div>
    </section>

    <!-- Filtros (IDs exactos) -->
    <section class="filters card" style="margin-bottom:12px; padding:12px; display:grid; grid-template-columns:repeat(6,minmax(0,1fr)); gap:8px">
      <input id="q" type="search" placeholder="Buscar por cÃ³digo o nombreâ€¦" style="grid-column:span 2" />
      <select id="f-estado">
        <option value="">Estado: Todos</option>
        <option value="aprobada">Aprobada</option>
        <option value="cursando">Cursando</option>
        <option value="pendiente">Pendiente</option>
      </select>
      <select id="f-anio"><option value="">AÃ±o: Todos</option></select>
      <select id="f-sem"><option value="">Semestre: Todos</option></select>
      <select id="f-area"><option value="">Ãrea: Todas</option></select>
      <select id="f-tipo">
        <option value="">Tipo: Todas</option>
        <option value="OB">Obligatoria</option>
        <option value="OP">Opcional</option>
      </select>
    </section>

    <!-- Accesos rÃ¡pidos (IDs que usa app.js) -->
    <section style="display:flex;gap:8px;margin-bottom:10px;flex-wrap:wrap">
      <button id="quick-ob" class="btn-cta" style="padding:.5rem 1rem">Obligatorias</button>
      <button id="quick-op" class="btn-cta" style="padding:.5rem 1rem">Opcionales</button>
      <button id="quick-clear" class="btn-cta" style="padding:.5rem 1rem; background:#334155">Limpiar filtros</button>
      <button id="btn-reset" class="btn-cta" style="padding:.5rem 1rem; background:#ef4444">Reiniciar progreso</button>
      <button id="btn-onboarding" class="btn-cta" style="padding:.5rem 1rem; background:#0ea5e9">Â¿CÃ³mo usar?</button>
    </section>

    <!-- Listado donde tu app.js renderiza -->
    <div id="list" class="list"></div>
  </main>

  <!-- Onboarding (IDs esperados) -->
  <div id="onboarding" class="onboarding" hidden>
    <div class="onb-inner card">
      <div class="head"><h3>Â¿CÃ³mo usar la malla?</h3></div>
      <div class="body">
        <ol>
          <li>Haz clic en las materias aprobadas para marcarlas.</li>
          <li>Con clic derecho puedes marcarlas como â€œCursandoâ€.</li>
          <li>Usa los filtros para buscar por Ã¡rea, aÃ±o o estado.</li>
        </ol>
      </div>
      <div class="foot"><button id="ob-close" class="btn-cta" style="padding:.5rem 1rem">Entendido</button></div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="app.js"></script>
  <script>
    // Toggle tema (reutiliza el del landing)
    (function(){
      const root=document.documentElement, key="theme", btn=document.getElementById("themeToggle");
      const apply=t=>{root.setAttribute("data-theme",t); if(btn) btn.textContent=t==="dark"?"â˜€ï¸":"ğŸŒ™"; try{localStorage.setItem(key,t)}catch(e){}};
      const saved=localStorage.getItem(key), prefersDark=window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches;
      apply(saved || (prefersDark?"dark":"light"));
      btn&&btn.addEventListener("click",()=>apply(root.getAttribute("data-theme")==="dark"?"light":"dark"));
    })();
  </script>
</body>
</html>
